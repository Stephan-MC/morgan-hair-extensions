<div class="">
  <div
    class="flex gap-3 justify-center items-center size-full"
    role="button"
    (click)="show() ? closeFilters() : openFilters()"
  >
    <span
      class="icon-[mingcute--settings-6-line]"
      role="img"
      aria-hidden="true"
    ></span>
    <span>
      @if (show()) {
        close
      }
      filters</span
    >
  </div>
</div>

@if (show()) {
  <div class="">
    <text-input [formControl]="q" label="Search" class="mt-6">
      <span ngProjectAs="right" class="justify-self-center self-center icon-[iconoir--search]" role="img" aria-hidden="true"></span>
    </text-input>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Filters</h4>
    <div class="flex gap-3 justify-end items-center">
      <!-- class="py-1 px-3 text-white bg-red-400 rounded-full" -->
      <button
        class="rounded-none!"
        (click)="q.reset()"
        [routerLink]="['./']"
        [state]="{skipLoading: true}"
        matButton="filled"
      >
        Reset Filters
      </button>
    </div>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">hair type</h4>
    <mat-chip-listbox ariaLabel="Wig hair_type selection">
      <mat-chip-option [selected]="!queryParams()['hair_type']" routerLink="./" [queryParams]="{hair_type: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (hair_type of hairTypes.value(); track hair_type.id) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ hair_type: hair_type.name, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['hair_type'] == hair_type.name"
        >
          {{ hair_type.name }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Color</h4>
    <mat-chip-listbox ariaLabel="Wig color selection">
      <mat-chip-option [selected]="!queryParams()['color']" routerLink="./" [queryParams]="{color: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (color of colors.value(); track color.id) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ color: color.name, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['color'] == color.name"
        >
          {{ color.name }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Length (inches)</h4>
    <mat-chip-listbox ariaLabel="Wig Length selection">
      <mat-chip-option [selected]="!queryParams()['length']" routerLink="./" [queryParams]="{length: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (length of lengths.value(); track length.id) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ length: length.value, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['length'] == length.value"
        >
          {{ length.value }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Texture</h4>
    <mat-chip-listbox ariaLabel="lace size selection">
      <mat-chip-option [selected]="!queryParams()['texture']" routerLink="./" [queryParams]="{texture: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (texture of textures.value(); track texture.id) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ texture: texture.name, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['texture'] == texture.name"
        >
          {{ texture.name }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Lace type</h4>
    <mat-chip-listbox ariaLabel="lace size selection">
      <mat-chip-option [selected]="!queryParams()['lace']" routerLink="./" [queryParams]="{lace: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (lace of laces.value(); track lace.id) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ lace: lace.name, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['lace'] == lace.name"
        >
          {{ lace.name }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Source</h4>
    <mat-chip-listbox ariaLabel="source size selection">
      <mat-chip-option [selected]="!queryParams()['source']" routerLink="./" [queryParams]="{source: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (source of sources.value(); track source.id) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ source: source.name, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['source'] == source.name"
        >
          {{ source.name }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Parting</h4>
    <mat-chip-listbox ariaLabel="Wig parting selection">
      <mat-chip-option [selected]="!queryParams()['parting']" routerLink="./" [queryParams]="{parting: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (parting of ['side', 'middle', 'free']; track parting) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ parting, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['parting'] == parting"
        >
          {{ parting }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>

  <div class="">
    <h4 class="text-lg font-bold">Cap Size</h4>
    <mat-chip-listbox ariaLabel="Cap size selection">
      <mat-chip-option [selected]="!queryParams()['cap']" routerLink="./" [queryParams]="{cap: undefined, page: undefined}" [state]="{skipLoading: true}">
        all
      </mat-chip-option>
      @for (cap of [21, 22, 23, 24, 25]; track cap) {
        <mat-chip-option
          routerLink="./"
          [queryParams]="{ cap, page: undefined }"
          queryParamsHandling="merge"
          [state]="{skipLoading: true}"
          [selected]="queryParams()['cap'] == cap"
        >
          {{ cap }}
        </mat-chip-option>
      }
    </mat-chip-listbox>
  </div>
}
